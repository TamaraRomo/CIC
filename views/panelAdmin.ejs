<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menú</title>
    <!-- Estilos CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="resources/css/style_menu_administrador.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.2/css/dataTables.bootstrap5.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
    <div class="logo-contenedor">
        <a href="https://www.uacam.mx/">
            <img src="resources/images/uac_logo.png" alt="Logo Izquierdo" class="logo-izquierdo">
        </a>
        <h1 class="titulo-sitio" data-id="Estatus" onclick="mostrarContenido(this)">CIC Assistance</h1>
        <a href="https://fi.uacam.mx/">
            <img src="resources/images/facu_logo.png" alt="Logo Derecho" class="logo-derecho">
        </a>
    </div>

<!-- Sección de sesión -->
<% if (typeof login !== 'undefined' && login) { %>

<div class="d-flex flex-row-reverse bd-highlight" >
    <div class="btn-group  p-2 bd-highlight justify-content-end">
        <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Usuario: <%= name %>
        </button>
        <div class="dropdown-menu animated--fade-in">
            <a class="dropdown-item" href="resources/manuales/manual_Admin.pdf" target="_blank">Manual de uso</a>
            <a class="dropdown-item" href="logout">Logout <i class="bi bi-box-arrow-right"></i></a>
        </div>
    </div>
</div>

<% } %>

<!-- Menú de opciones -->
<nav class="menu">
    <div class="opcion-menu" data-id="Dashboard" onclick="mostrarContenido(this)">Dashboard</div>
    <div class="opcion-menu" data-id="Estatus" onclick="mostrarContenido(this)">Estatus</div>
    <div class="opcion-menu" data-id="solicitud-de-reportes" onclick="mostrarContenido(this)">Solicitud de Reportes</div>
    <div class="opcion-menu" data-id="Vales" onclick="mostrarContenido(this)">Vales</div>
    <div class="opcion-menu" data-id="Dictamen" onclick="mostrarContenido(this)">Dictamen</div>
    <div class="opcion-menu" data-id="Historial" onclick="mostrarContenido(this)">Historial de Solicitudes</div>
    <div class="opcion-menu" data-id="Historial2" onclick="mostrarContenido(this)">Historial General</div>
    <div class="opcion-menu" data-id="Registro" onclick="mostrarContenido(this)">Registro</div>
    <div class="opcion-menu" data-id="RegistroT" onclick="mostrarContenido(this)">Tecnicos</div>
    <div class="opcion-menu" data-id="Estadisticas" onclick="mostrarContenido(this)">Estadisticas</div>
</nav>


<main class="contenido">
<!-- DASHBOARD----------------------------------------------------------------------------------------------------- -->
    <div id="Dashboard" class="contenido-individual">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Dashboard</title>
            <link rel="stylesheet" href="resources/css/dashboard.css">
        </head>
        <body>
          <% const totalTecnicos = tecnicos.length; %>
          <% const totalAsignadas = cantidadAsignadas[0].totalSolicitudes; %>
          <% const totalSolicitudes = cantidadSolicitudes[0].totalSolicitudes; %>
          <% const totalVales = cantidadVales[0].totalSolicitudes; %>
          <% const totalSemanal = cantidadSemanal[0].totalSolicitudes; %>
          <% const datos = conteo.map(contado => contado.total); %>
          <% const totalDictamenes = cantidadDictamenes[0].totalDictamenes; %>
            <div class="dashboardContenedor">
            <h2>Dashboard</h2>
            <div class="container-xxl flex-grow-1 container-p-y">
              <div class="row">
                <div class="col-lg-8 mb-4 order-0">
                  <div class="card">
                    <div class="d-flex align-items-end row">
                      <div class="col-sm-7">
                        <div class="card-body">
                          <h5 class="card-title text-primary">¡Bienvenido <%= name %>🎉!</h5>
                          <p class="mb-4">
                            En este panel podrá consultar información general sobre el sistema <span class="fw-bold">CIC Assistance</span>
                          </p>
                        </div>
                      </div>
                      <div class="col-sm-5 text-center text-sm-left">
                        <div class="card-body pb-0 px-0 px-md-4">
                          <img
                            src="resources/images/man-with-laptop-light.png"
                            height="140"
                            alt="View Badge User"
                            data-app-dark-img="illustrations/man-with-laptop-dark.png"
                            data-app-light-img="illustrations/man-with-laptop-light.png"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-4 col-md-4 order-1">
                  <div class="row">
                    <div class="col-lg-6 col-md-12 col-6 mb-4">
                      <div class="card border-primary text-white bg-primary">
                        <div class="card-body ">
                          <div class="card-title d-flex align-items-start justify-content-between">
                            <div class="avatar flex-shrink-0">
                              <i class="bi bi-envelope-open h2"></i>
                            </div>
                          </div>
                          <span class="fw-semibold d-block mb-1">Total de solicitudes</span>
                          <h3 class="card-title mb-2"><%= totalSolicitudes %></h3>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-6 col-md-12 col-6 mb-4">
                      <div class="card border-success text-white bg-success">
                        <div class="card-body">
                          <div class="card-title d-flex align-items-start justify-content-between">
                            <div class="avatar flex-shrink-0">
                              <i class="bi bi-person-check h4"></i>
                            </div>
                          </div>
                          <span class="fw-semibold d-block mb-1">Solicitudes asignadas</span>
                          <h3 class="card-title text-nowrap mb-1"><%= totalAsignadas %></h3>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Total Revenue -->
                <div class="col-12 col-lg-8 order-2 order-md-3 order-lg-2 mb-4">
                  <div class="card">
                    <div class="row row-bordered g-0">
                        <h5 class="card-header m-0 me-2 pb-3">Estado de las solicitudes</h5>
                        <div id="totalRevenueChart" class="px-2">
                          <canvas id="myChart" width="200" height="80"></canvas>
                        </div>
                    </div>
                  </div>
                </div>
                <!--/ Total Revenue -->
                <div class="col-12 col-md-8 col-lg-4 order-3 order-md-2">
                  <div class="row">
                    <div class="col-6 mb-4">
                      <div class="card border-warning text-white bg-warning">
                        <div class="card-body">
                          <div class="card-title d-flex align-items-start justify-content-between">
                            <div class="avatar flex-shrink-0">
                              <i class="bi bi-person-fill-gear h4"></i>
                            </div>
                          </div>
                          <span class="fw-semibold d-block mb-1">Total de técnicos</span>
                          <h3 class="card-title text-nowrap mb-2"><%= totalTecnicos %></h3>
                        </div>
                      </div>
                    </div>
                    <div class="col-6 mb-4">
                      <div class="card border-secondary text-white bg-secondary">
                        <div class="card-body">
                          <div class="card-title d-flex align-items-start justify-content-between">
                            <div class="avatar flex-shrink-0">
                              <i class="bi bi-calendar-week h4"></i>
                            </div>
                          </div>
                          <span class="fw-semibold d-block mb-1">Solicitudes recibidas ultimos 7 días</span>
                          <h3 class="card-title mb-2"><%= totalSemanal %></h3>
                        </div>
                      </div>
                    </div>
                    <!-- </div>
    <div class="row"> -->
                    <div class="col-12 mb-4">
                      <div class="card border-info text-white bg-info">
                        <div class="card-body">
                          <div class="d-flex justify-content-between flex-sm-row flex-column gap-3">
                            <div class="d-flex flex-sm-column flex-row align-items-start justify-content-between">
                              <div class="card-title">
                                <h5 class="fw-semibold d-block mb-1">Vales generados</h5>                              </div>
                              <div class="mt-sm-auto">
                                <h3 class="mb-0"><%= totalVales %></h3>
                              </div>
                            </div>
                            <div id="profileReportChart"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <!-- Order Statistics -->
                <div class="col-md-6 col-lg-4 col-xl-4 order-0 mb-4">
                  <div class="card h-100">
                    <div class="card-header d-flex align-items-center justify-content-between pb-0">
                      <div class="card-title mb-0">
                        <h5 class="m-0 me-2">Solicitudes por técnico</h5>
                        <small class="text-white">Cantidad de solicitudes asignadas a cada técnico</small>
                      </div>
                    </div>
                    <div class="card-body overflow-auto" style="max-height: 25em;">
                      <div class="d-flex justify-content-between align-items-center mb-3">
                        <div class="d-flex flex-column align-items-center gap-1">
                          <h2 class="mb-2"><%= totalAsignadas %></h2>
                          <span>Total</span>
                        </div>
                        <div id="orderStatisticsChart"></div>
                      </div>
                      <ul class="p-0 m-0">
                        <% asignaTecnico.forEach((tecnico) => { %>
                        <li class="d-flex mb-4 pb-1">
                          <div class="avatar flex-shrink-0 me-3">
                            <span class="avatar-initial rounded bg-label-primary">
                              <i class="bx bx-mobile-alt"></i>
                            </span>
                          </div>
                          <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                            <div class="me-2">
                              <h6 class="mb-0"><%= tecnico.NombreTecnico %></h6>
                              <small class="text-muted"><%= tecnico.CorreoTecnico %></small>
                            </div>
                            <div class="user-progress">
                              <small class="fw-semibold"><%= tecnico.CantidadAsignaciones %></small>
                            </div>
                          </div>
                        </li>
                        <% }); %>
                      </ul>
                    </div>
                  </div>
                </div>
                <!--/ Order Statistics -->

                <!-- Expense Overview -->
                <div class="col-md-6 col-lg-4 order-1 mb-4">
                  <div class="card h-100">
                    <div class="card-header">
                      <h5 class="card-title m-0 me-2">Solicitudes-Vales-Dictámenes</h5>
                    </div>
                    <div class="card-body px-0">
                      <div class="tab-content p-0">
                        <div class="tab-pane fade show active" id="navs-tabs-line-card-income" role="tabpanel">
                          <canvas id="myChart2" width="50" height="50"></canvas>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--/ Expense Overview -->

                <!-- Transactions -->
                <div class="col-md-6 col-lg-4 order-2 mb-4">
                  <div class="card h-100">
                    <div class="card-header d-flex align-items-center justify-content-between">
                      <h5 class="card-title m-0 me-2">Solicitudes sin empezar a trabajar</h5>
                    </div>
                    <div class="card-body overflow-auto" style="max-height: 25em;">
                      <ul class="p-0 m-0">
                        <% abierto.forEach((abiertas) => { %>
                          <li class="d-flex mb-4 pb-1">
                            <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                              <div class="me-2">
                                <small class="text-muted d-block mb-1"><%= abiertas.Nombre %></small>
                                <h6 class="mb-0"><%= abiertas.Equipo %></h6>
                              </div>
                              <div class="user-progress d-flex align-items-center gap-1">
                                <h6 class="mb-0"><%= abiertas.Fecha %></h6>
                              </div>
                            </div>
                          </li>
                        <% }); %>
                      </ul>
                    </div>
                  </div>
                </div>
                <!--/ Transactions -->
              </div>
            </div>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const ctx = document.getElementById('myChart');
  const ctx2 = document.getElementById('myChart2');

  const data = {
    labels: [<% conteo.forEach(conteo => { %> '<%= conteo.estado %>', <% }); %>],
    datasets: [{
      label: 'Total',
      data: [<%= datos %>], // Aquí deberías agregar tus datos para la segunda gráfica
      backgroundColor: [
      'rgba(255, 99, 132, 0.8)',
      'rgba(255, 206, 86, 0.8)',
      'rgba(75, 192, 192, 0.8)',
      'rgba(54, 162, 235, 0.8)',
      'rgba(0, 204, 102, 0.8)'
      ],
      borderColor: [
        'rgba(255, 99, 132, 1)',
        'rgba(255, 206, 86, 1)',
        'rgba(75, 192, 192, 1)',
        'rgba(54, 162, 235, 1)',
        'rgba(0, 204, 102, 1)'
      ],
      borderWidth: 1
      }]
      };

  // Configura la instancia de la segunda gráfica
  const myChart = new Chart(ctx, {
    type: 'bar',
    data: data,
    options: {
      maintainAspectRatio: false,
      aspectRatio: 2,
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });

  const data2 = {
    labels: ['Solicitudes', 'Vales', 'Dictamenes'],
    datasets: [{
      label: 'Cantidad por tipo',
      data: [<%= totalSolicitudes %>, <%= totalVales %>, <%= totalDictamenes %>],
      backgroundColor: [
      'rgba(255, 99, 132, 0.8)',
      'rgba(255, 206, 86, 0.8)',
      'rgba(0, 204, 102, 0.8)'
      ],
      borderColor: [
        'rgba(255, 99, 132, 1)',
        'rgba(255, 206, 86, 1)',
        'rgba(0, 204, 102, 1)'
      ],
      borderWidth: 1
      }]
      };

  const myChart2 = new Chart(ctx2, {
    type: 'doughnut',
    data: data2,
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>
        </body>
    </div>
<!-- FIN DE DASHBOARD----------------------------------------------------------------------------------------------------- -->
<!-----ESTATUSSSSSSSS--------------------------------------------------------------------------------------------->
<div id="Estatus" class="contenido-individual">
<!-- Contenido de historial -->
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="resources/css/solicitud_estatus.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<title>Statistics Example</title>
</head>
<body>
<div class="container" style="max-width: 100%;">
    <h2 id="estadoSolicitudes">Estado de solicitudes</h2>
    <!-- Agrega campos de entrada de fecha -->
    <input type="date" id="fechaInicio">
    <input type="date" id="fechaFin">
    <button type="button" class="btn btn-outline-dark" onclick="#">Filtrar</button>
    <div class="guardarCambios">
        <button type="button" class="btn btn-outline-dark" id="guardarCambios">Guardar cambios</button>
    </div>
    <div class="table-responsive">
        <table  class="table" id="estatusTabla">
            <tr class="tableEstatus">
                <th colspan="5" class="tablaTitulos">Abierto</th>
                <th colspan="5" class="tablaTitulos">Asignadas</th>
                <th colspan="5" class="tablaTitulos">En Proceso</th>
                <th colspan="5" class="tablaTitulos">En Espera</th>
                <th colspan="5" class="tablaTitulos">Cerrado</th>
            </tr>
        <tbody>
            <tr class="table-secondary">
                <td>Folio</td>
                <td>Nombre</td>
                <td>Equipo</td>
                <td>Fecha</td>
                <td id="bordeD">Estatus</td>
                <td >Folio</td>
                <td>Nombre</td>
                <td>Fecha</td>
                <td>Tecnico</td>
                <td id="bordeDer">Estatus</td>
                <td >Folio</td>
                <td>Nombre</td>
                <td>Equipo</td>
                <td>Fecha</td>
                <td id="bordeDer">Estatus</td>
                <td >Folio</td>
                <td>Nombre</td>
                <td>Equipo</td>
                <td>Fecha</td>
                <td id="bordeDer">Estatus</td>
                <td>Folio</td>
                <td>Nombre</td>
                <td>Equipo</td>
                <td>Fecha</td>
                <td>Estatus</td>
            </tr>
            <tr class="table-light">
                <% for (let i = 0; i < Math.max(abierto.length, pendiente.length, cerrado.length); i++) { %>
                    <tr>
                        <!-- Abierto -->
                        <% if (i < abierto.length) { %>
                            <td class="bg-danger"><%= abierto[i].FolioSolicitud %></td>
                            <td class="bg-danger"><%= abierto[i].Nombre %></td>
                            <td class="bg-danger" id="equipoEstado<%= i %>"><%= abierto[i].Equipo %></td>
                            <td class="bg-danger fechaEstado" id="fechaEstado<%= i %>"><%= abierto[i].Fecha %></td>
                            <td class="seleccion bg-danger" id="bordeDerecho<%= i %>" >
                                <select class="form-select cambiarEstado" data-folio="<%= abierto[i].FolioSolicitud %>">
                                    <option value="Abierto" selected>Abierto</option>
                                    <option value="Proceso">En Proceso</option>
                                    <option value="Espera">En Espera</option>
                                    <option value="Cerrado">Cerrado</option>
                                </select>
                            </td>
                        <% } else { %>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td id="bordeDerechoVacio"></td>
                        <% } %>
                        <!----ASIGNADAS-->
                        <% if (i < asignada.length) { %>
                            <td class="bg-warning"><%= asignada[i].FolioSolicitud %></td>
                            <td class="bg-warning"><%= asignada[i].UsuarioNombre %></td>
                            <td class="bg-warning fechaEstado" id="fechaEstado<%= i %>"><%= asignada[i].Fecha %></td>
                            <td class="bg-warning" id="equipoEstado<%= i %>"><%= asignada[i].Nombre %></td>
                            <td class="seleccion bg-warning" id="ladoDerecho<%= i %>" >
                                <select class="form-select cambiarEstado" data-folio="<%= asignada[i].FolioSolicitud %>">
                                    <option value="Asignada" selected>Asignada</option>
                                    <option value="Proceso">En Proceso</option>
                                    <option value="Espera">En Espera</option>
                                    <option value="Cerrado">Cerrado</option>
                                </select>
                            </td>
                        <% } else { %>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td id="ladoDerechoVacio"></td>
                        <% } %>
                        <!-- Pendiente -->
                        <% if (i < pendiente.length) { %>
                            <td class="bg-info"><%= pendiente[i].FolioSolicitud %></td>
                            <td class="bg-info"><%= pendiente[i].Nombre %></td>
                            <td class="bg-info"><%= pendiente[i].Equipo %></td>
                            <td class="bg-info fechaEstado" id="fechaEstado<%= i %>"><%= pendiente[i].Fecha %></td>
                            <td class="seleccion bg-info" id="pendienteDerecha<%= i %>">
                                <select class="form-select cambiarEstado" data-folio="<%= pendiente[i].FolioSolicitud %>">
                                    <option value="Proceso" selected>En Proceso</option>
                                    <option value="Abierto">Abierto</option>
                                    <option value="Espera">En Espera</option>
                                    <option value="Cerrado">Cerrado</option>
                                </select>
                            </td>
                        <% } else { %>
                            <td ></td>
                            <td ></td>
                            <td ></td>
                            <td id="pendienteVacioDerecha"></td>

                        <% } %>
                        <!-- En espera -->
                        <% if (i < espera.length) { %>
                            <td class="bg-primary"><%= espera[i].FolioSolicitud %></td>
                            <td class="bg-primary"><%= espera[i].Nombre %></td>
                            <td class="bg-primary"><%= espera[i].Equipo %></td>
                            <td class="bg-primary fechaEstado" id="fechaEstado<%= i %>"><%= espera[i].Fecha %></td>
                            <td class="seleccion bg-primary" id="esperarDerecha<%= i %>">
                                <select class="form-select cambiarEstado" data-folio="<%= espera[i].FolioSolicitud %>">
                                    <option value="Proceso">En Proceso</option>
                                    <option value="Abierto">Abierto</option>
                                    <option value="Espera" selected>En Espera</option>
                                    <option value="Cerrado">Cerrado</option>
                                </select>
                            </td>
                        <% } else { %>
                            <td ></td>
                            <td ></td>
                            <td ></td>
                            <td id="esperaVacioDerecha"></td>

                        <% } %>
                        <!-- Cerrado -->
                        <% if (i < cerrado.length) { %>
                            <td class="bg-success"><%= cerrado[i].FolioSolicitud %></td>
                            <td class="bg-success"><%= cerrado[i].Nombre %></td>
                            <td class="bg-success"><%= cerrado[i].Equipo %></td>
                            <td class="bg-success fechaEstado" id="fechaEstado<%= i %>"><%= cerrado[i].Fecha %></td>
                            <td class="seleccion bg-success" id="ladoDerecho<%= i %>" >
                                <select class="form-select cambiarEstado" data-folio="<%= cerrado[i].FolioSolicitud %>">
                                    <option value="Asignada" selected>Asignada</option>
                                    <option value="Proceso">En Proceso</option>
                                    <option value="Espera">En Espera</option>
                                    <option value="Cerrado">Cerrado</option>
                                </select>
                            </td>
                        <% } else { %>
                            <td></td>
                            <td></td>
                            <td></td>

                        <% } %>
                    </tr>
                <% } %>
            </tr>
        </tbody>
    </table>
    </div>
</div>
<script src="resources/scripts/estatus.js"></script>
</body>
<!-----SOLICITUD DE SOPORTE TÉCNICO--------------------------------------------------------------------------------------------->
</div>
    <div id="solicitud-de-reportes" class="contenido-individual">
        <!-- Contenido de la solicitud de reportes -->
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link rel="stylesheet" href="resources/css/style_solicitud.css">
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
            <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
            <title>Solicitud Soporte Tecnico</title>
        </head>
        <body>
            <div class="solicitud">
                <p id="fechaSolicitud"></p>
                <h2>Solicitud de Servicio Técnico</h2>
                <div id="telefonoError" style="width: 50%;"></div> <!-- Aquí se mostrará el mensaje de error -->
                <form action="solicitudAdmin" method="post" onsubmit="return validarFormulario();">
                    <div class="contenedorInicial">
                        <div>
                            <label for="telefono" class="labelMayor required">Teléfono</label>
                            <input class="form-control form-control-sm" type="number" placeholder="Escribe tu telefono" aria-label=".form-control-sm example" name="telefono" id="telefono" required>
                        </div>
                        <div>
                            <label for="edificio" class="labelMayor required">Edificio y nivel</label>
                            <select name="edificio" id="edificio" class="form-select form-select-sm" required>
                                <% edificios.forEach(edificio => { %>
                                    <option value="<%= edificio.IdEdificio %>"><%= edificio.NombreEdificio %>-<%= edificio.Nivel %></option>
                                <% }); %>
                            </select>
                        </div>
                        <div>
                            <label for="area" class="labelMayor required">Ubicación física</label>
                            <input class="form-control form-control-sm" type="text" placeholder="Escribe tu área" aria-label=".form-control-sm example" name="area" id="area" required>
                        </div>
                        <div>
                            <label for="usuarios" class="labelMayor required">Usuario</label>
                            <select name="usuarios" id="usuarios" class="form-select form-select-sm">
                                <% usuarios.forEach(usuario => { %>
                                    <option value="<%= usuario.IdUsuario + '|' + usuario.Correo %>"><%= usuario.Nombre %></option>
                                <% }); %>
                            </select>

                        </div>
                    </div>
                    <fieldset>
                        <legend class="labelMayor required">Equipos</legend>
                        <div class="contenedor-checkbox">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="equipos" id="monitor1" value="Monitor" onchange="checboxListado(this)">
                                <label class="form-check-label" for="monitor">Monitor</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="equipos" id="nodo1" value="Nodo" onchange="checboxListado(this)">
                                <label class="form-check-label" for="nodo">Nodo</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="equipos" id="ups1" value="UPS" onchange="checboxListado(this)">
                                <label class="form-check-label" for="ups">UPS</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox"  name="equipos" id="laptop1" value="Laptop" onchange="checboxListado(this)">
                                <label class="form-check-label" for="laptop">Laptop</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="equipos" id="proyector1" value="Proyector" onchange="checboxListado(this)">
                                <label class="form-check-label" for="proyector">Proyector</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="equipos" id="point" value="Access Point" onchange="checboxListado(this)">
                                <label class="form-check-label" for="access">Access Point</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="equipos" id="pc1" value="PC" onchange="checboxListado(this)">
                                <label class="form-check-label" for="pc">PC</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox"  name="equipos" id="gabinete1" value="Gabinete" onchange="checboxListado(this)">
                                <label class="form-check-label" for="gabinete">Gabinete</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox"  name="equipos" id="teclado1" value="Teclado" onchange="checboxListado(this)">
                                <label class="form-check-label" for="teclado">Teclado</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="equipos" id="raton" value="Mouse" onchange="checboxListado(this)">
                                <label class="form-check-label" for="mouse">Mouse</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="equipos" id="telef" value="Teléfono" onchange="checboxListado(this)">
                                <label class="form-check-label" for="telefono">Teléfono</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" name="equipos" id="impresora1" value="Impresora" onchange="checboxListado(this)">
                                <label class="form-check-label" for="impresora">Impresora</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox"  name="equipos" id="otro" value="Otro" data-input-id="otroInput" onchange="checboxListado(this)">
                                <label class="form-check-label" for="otro">Otro</label>
                                <input class="form-control form-control-sm" type="text"  name="otroInput" id="otroInput" disabled>
                            </div>
                            <input type="hidden" name="equiposSeleccionados" id="equiposSeleccionados" value="">
                        </div>
                    </fieldset>

                    <label for="descripcion" class="labelMayor required">Descripción del problema</label>
                    <textarea class="form-control" name="descripcion" id="descripcion" rows="8" placeholder="Escribe todos los detalles de tu problema" required></textarea>

                    <div class="enviarSoli">
                        <button type="submit" class="btn btn-outline-dark" id="enviar" value="Submit" onclick="validarFormulario()">Enviar</button>
                    </div>
                </form>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
            <script src="resources/scripts/seleccionMultiple.js"></script>
            <script src="resources/scripts/solicitudSoporte.js"></script>
            <script src="resources/scripts/validarTelefono.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>  <!-- Obtenido de sweetAlert2  -->
            <!--Tenemos que llamar la estructura para usar el mensaje AlertSweet en EJS llamando los parametros establecidos en APPJS-->
            <% if(typeof alert != "undefined"){ %>
            <script>
                Swal.fire({
                    title: '<%= alertTitle %>',
                    text: '<%= alertMessage %>',
                    icon: '<%= alertIcon %>',
                    showConfirmButton: <%= showConfirmButton %>,
                    timer: <%= timer %>
                }).then(() =>{
                    window.location ='/<%= ruta %>'    //Hay que especificar la ruta con '/' que indica que nos redirige a la raiz, index
                })
            </script>
            <% } %>
        </body>
    </div>

<!-- VALES----------------------------------------------------------------------------------------------------- -->
    <div id="Vales" class="contenido-individual">
        <!-- Contenido de historial -->
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="resources/css/solicitud_vale.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    </head>
    <body>
        <!-- Contenedor principal -->
        <div class="contenedor-principal" id="contenedorPDF">
            <h2 >Creación de Vales Servicio Técnico</h2>
            <!-- Contenedor azul con información del vale de entrada -->
            <form action="vales" method="post">
                <div class="mb-3 row">
                    <label for="folios" class="col-sm-2 col-form-label labelFolio">Folio de la solicitud</label>
                    <div class="col-sm-10">
                        <select name="folios" id="folios" class="form-select form-select-sm">
                            <% folioSolicitudes.forEach(folio => { %>
                            <option value="<%= folio.FolioSolicitud + '|' + folio.Correo %>"><%= folio.FolioSolicitud %></option>
                            <% }); %>
                        </select>
                    </div>
                  </div>
                  <fieldset>
                    <legend class="labelMayor required">Equipos</legend>
                    <div class="contenedor-checkbox">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" name="equipos" id="monitor" value="Monitor" onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="monitor">Monitor</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" name="equipos" id="nodo" value="Nodo" onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="nodo">Nodo</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" name="equipos" id="ups" value="UPS" onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="ups">UPS</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox"  name="equipos" id="laptop" value="Laptop" onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="laptop">Laptop</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" name="equipos" id="proyector" value="Proyector" onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="proyector">Proyector</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" name="equipos" id="access" value="Access Point" onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="access">Access Point</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" name="equipos" id="pc" value="PC" onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="pc">PC</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox"  name="equipos" id="gabinete" value="Gabinete" onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="gabinete">Gabinete</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox"  name="equipos" id="teclado" value="Teclado" onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="teclado">Teclado</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" name="equipos" id="mouse" value="Mouse" onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="mouse">Mouse</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" name="equipos" id="tele" value="Teléfono" onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="telefono">Teléfono</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" name="equipos" id="impresora" value="Impresora" onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="impresora">Impresora</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox"  name="equipos" id="otro2" value="Otro" data-input-id="otroInput2" onchange="handleCheckboxChange(this)">
                            <label class="form-check-label" for="otro2">Otro</label>
                            <input class="form-control form-control-sm" type="text"  name="otroInput2" id="otroInput2" disabled>
                        </div>
                        <input type="hidden" name="listaEquiposCheck" id="listaEquiposCheck" value="">

                    </div>
                </fieldset>
                <fieldset>
                    <legend class="labelMayor">Datos del equipo:</legend>

                    <div class="mb-3 row">
                        <label for="serie" class="col-sm-2 col-form-label required">No. Serie:</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control datosEquipo" name="serie" id="serie" required>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="marca" class="col-sm-2 col-form-label required">Marca:</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control datosEquipo" name="marca" id="marca" required>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="modelo" class="col-sm-2 col-form-label required">Modelo:</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control datosEquipo"  name="modelo" id="modelo" required>
                        </div>
                    </div>
                    <label for="caracteristicas" class="required">Características:</label>
                    <textarea class="form-control" name="caracteristicas" id="caracteristicas" rows="8" required></textarea>

                </fieldset>
                <div class="contenedor-estatus">
                    <div>
                        <label for="estatus" class="col-sm-2 col-form-label labelFolio required" id="lblEstatus">Estatus:</label>
                            <select name="estatus" id="estatus" class="form-select form-select-sm" required>
                                <option value="Funciona">Funciona</option>
                                <option value="No funciona">No funciona</option>
                                <option value="Esperar">Esperar piezas</option>
                            </select>
                    </div>
                    <div>
                        <label for="tecnico" class="col-sm-2 col-form-label labelFolio required" id="lblAsignado">Asignar a técnico:</label>
                        <select name="tecnico" id="tecnico" class="form-select form-select-sm">
                            <% tecnicos.forEach(tecnico => { %>
                            <option value="<%= tecnico.IdTecnico + '|' + tecnico.Correo%>"><%= tecnico.IdTecnico %>-<%= tecnico.Nombre %></option>
                            <% }); %>
                        </select>
                    </div>
                    <div>
                        <label for="revision" class="col-sm-2 col-form-label labelFolio" id="lblRevision">Revisó:</label>
                        <input type="text" class="form-control datosEquipo input-sm" name="revision" id="revision" required>
                    </div>
                </div>
                <div class="enviarVale">
                    <button type="submit" class="btn btn-outline-dark" id="generarPDF" value="Submit">Generar PDF</button>
                </div>
            </form>
        </div>
    </div> <!-- Fin del contenedor princiupal-->
        <script src="resources/scripts/seleccionMultiple.js"></script>
        <script src="resources/scripts/vale.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>  <!-- Obtenido de sweetAlert2  -->
        <!--Tenemos que llamar la estructura para usar el mensaje AlertSweet en EJS llamando los parametros establecidos en APPJS-->
        <% if(typeof alert != "undefined"){ %>
        <script>
            Swal.fire({
                title: '<%= alertTitle %>',
                text: '<%= alertMessage %>',
                icon: '<%= alertIcon %>',
                showConfirmButton: <%= showConfirmButton %>,
                timer: <%= timer %>
            }).then((result) =>{
                window.location.href = '/Vale_de_entrada_001.pdf';
                window.location ='/<%= ruta %>'    //Hay que especificar la ruta con '/' que indica que nos redirige a la raiz, index
            })
        </script>
        <% } %>
    </body>
    </div>

<!-- -------------------------------------------------------------------------------------------------------- -->
<!-- DICTAMENES------------------------------------------------------------------------------------------------ -->
<div id="Dictamen" class="contenido-individual">
    <!-- Contenido de historial -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creación de Dictamen</title>
    <link rel="stylesheet" href="resources/css/solicitud_dictamen.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="bodyDictamen">
    <div class="creacionDictamen">
        <p id="fechaDictamen"></p>
        <h2>Creación de Dictámenes</h2>
        <div class="row g-3">
            <div class="col-auto">
                <label for="folioSolicitud" class="form-control-plaintext required">Folio:</label>
            </div>
            <div class="col-auto">
                <input type="text" name="folioSolicitud" id="folioSolicitudDictamen" class="form-control"  placeholder="Folio de la solicitud de soporte técnico">
            </div>
            <div class="col-auto">
                <button type="button" class="btn btn-outline-dark" id="btnBuscarFolio" onclick="buscarFolio()">Buscar</button>
            </div>
        </div>
        <form action="/guardar-datos-y-generar-pdf" method="post">
            <div class="contenedorDictamen">
                <div>
                    <label for="valeId" class="labelMayor">Vale:</label>
                    <input type="text" id="identificadorVale" name="valeId" class="form-control form-control-sm" readonly>
                </div>
                <div>
                    <label for="equipoDictamen" class="labelMayor">Equipo:</label>
                    <input type="text" id="equipoDictamen" name="equipoDictamen" class="form-control form-control-sm" readonly>
                </div>
                <div>
                    <label for="marcaEquipo" class="labelMayor required">Marca:</label>
                    <input type="text" name="marcaEquipo" id="marcaEquipo" class="form-control form-control-sm" required>
                </div>
                <div>
                    <label for="modeloEquipo" class="labelMayor required">Modelo:</label>
                    <input type="text" name="modeloEquipo" id="modeloEquipo" class="form-control form-control-sm" required>
                </div>
                <div>
                    <label for="noSerieEquipo" class="labelMayor required">N° de serie:</label>
                    <input type="text" name="noSerieEquipo" id="noSerieEquipo" class="form-control form-control-sm" required>
                </div>
                <div>
                    <label for="estado" class="labelMayor required">Estado:</label>
                    <select name="estado" id="estado" class="form-select form-select-sm" required>
                        <option value="blanco">&nbsp;</option>
                        <option value="Vigente">Vigente</option>
                        <option value="Obsoleto">Obsoleto</option>
                    </select>
                </div>
                <div>
                    <label for="tipoDictamen" class="labelMayor required">Dictamen:</label>
                    <select name="tipoDictamen" id="tipoDictamen" class="form-select form-select-sm" required>
                        <option value="blanco">&nbsp;</option>
                        <option value="Funciona">Funcional</option>
                        <option value="No Funciona">Obsoleto</option>
                        <option value="Baja">Tramitar Baja</option>
                    </select>
                </div>
                <div>
                   <label for="dirigidoA" class="labelMayor required">Dirigido a:</label>
                   <input type="text" name="dirigidoA" id="dirigidoA" class="form-control form-control-sm" required>
                </div>

            </div>
            <div class="contenedorSecundario">
                <div>
                    <label for="caracDictamen" class="labelMayor required">Características:</label>
                    <textarea class="form-control" name="caracDictamen" id="caracDictamen" cols="30" rows="5" required></textarea>
                </div>
                <div>
                    <label for="observacionesDictamen" class="labelMayor required">Observaciones:</label>
                    <textarea class="form-control" name="observacionesDictamen" id="observacionesDictamen" cols="30" rows="5" required></textarea>
                </div>
                <div>
                    <label for="descripcionDictamen" class="labelMayor required">Descripción técnica de partes necesarias:</label>
                    <textarea class="form-control" name="descripcionDictamen" id="descripcionDictamen" cols="30" rows="5" required></textarea>
                </div>
                <div class="btnGuardarDatos">
                    <button type="submit" id="btnGuardarDatos" class="btn btn-outline-dark" value="submit">Guardar datos y generar PDF</button>
                </div>
            </div>
        </form>
    </div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="resources/scripts/dictamenes_fecha.js"></script>
<script src="resources/scripts/relleno_dictamen.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>  <!-- Obtenido de sweetAlert2  -->
<!--Tenemos que llamar la estructura para usar el mensaje AlertSweet en EJS llamando los parametros establecidos en APPJS-->
<% if(typeof alert != "undefined"){ %>
    <script>
        Swal.fire({
            title: '<%= alertTitle %>',
            text: '<%= alertMessage %>',
            icon: '<%= alertIcon %>',
            showConfirmButton: <%= showConfirmButton %>,
            timer: <%= timer %>
        }).then((result) =>{
            window.location ='/<%= ruta %>'    //Hay que especificar la ruta con '/' que indica que nos redirige a la raiz, index
        })
    </script>
    <% } %>
</body>
</div>


<!-- ------------------------------------------------------------------------------------------------- -->
<!-- SOLICITUD DE HISTORIAL DE SOLICITUDES -------------------------------------------------------------------------------------->
<div id="Historial" class="contenido-individual">
    <head>
        <!-- Metadatos -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Historial de Solicitudes</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="stylesheet" href="estilos/solicitud_historial.css">
        <!-- Fuentes -->
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    </head>
    <body class="bodyHistorial">
    <!-- Contenedor principal para el historial de solicitudes -->
        <div class="historialSolicitudes">
            <!-- Título de la sección -->
            <h2 id="tituloHistorialSoli">Historial de Solicitudes</h2>
                <!-- Contenedor para la tabla del historial -->
                <div class="table-responsive">
                    <table  class="table table-hover table-striped" id="TablaHistorialSolicitudes">
                        <thead>
                            <th>Folio</th>
                            <th>Fecha</th>
                            <th>Hora</th>
                            <th>Usuario</th>
                            <th>Equipo</th>
                            <th>Estado</th>
                            <th>Vale</th>
                            <th>Dictamen</th>
                        </thead>
                        <% historial.forEach(solicitud => { %>
                            <!-- Fila de la tabla para cada solicitud en el historial -->
                            <tr>
                                <td><%= solicitud.FolioSolicitud %></td>
                                <td><%= solicitud.Fecha %></td>
                                <td><%= solicitud.Hora %></td>
                                <td><%= solicitud.NombreUsuario %></td>
                                <td><%= solicitud.Equipo%></td>
                                <td class="estado-celda" data-estado="<%= solicitud.Estado %>"><%= solicitud.Estado%></td>
                                <td><%= solicitud.Vale %></td>
                                <td><%= solicitud.Dictamen %></td>
                            </tr>
                        <% }); %>
                    </table>
                </div>
        </div>
        <script src="resources/scripts/semaforo.js"></script>
            <script src="resources/scripts/paneles.js"></script>

    </body>
</div>

<!-- ------------------------------------------------------------------------------------------------ -->
<!-- REGISTRO DE USUARIOS------------------------------------------------------------------------------ -->
    <div id="Registro" class="contenido-individual">
        <!-- Contenido de Registro -->
        <head>
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Registro usuarios</title>
            <link rel="stylesheet" href="resources/css/style_registro.css">
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
            <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
        </head>
        <body>
        <div class="contenedor">
            <h3 class="titulosLogin">Registrar Usuario</h3>
            <form action="registerP" method="post" onsubmit="return validar();" id="formRegistro">
                <div class="registroCampos">
                    <label for="username" class="lblRegistro required">Nombre de Usuario</label>
                    <input type="text" class="form-control" id="username" name="username" placeholder="Nombre de usuario unico" required>
                </div>
                <div class="registroCampos">
                    <label for="password" class="lblRegistro required">Contraseña</label>
                    <input type="password" class="form-control" id="password" name="password" placeholder="8 caracteres mínimo, sin espacios" required>
                </div>
                <div class="registroCampos">
                    <label for="password2" class="lblRegistro required">Repita su contraseña</label>
                    <input type="password" class="form-control" id="password2" name="password2" placeholder="8 caracteres mínimo, sin espacios" required>
                </div>
                <div class="registroCampos">
                    <label for="name" class="lblRegistro required">Nombre Completo</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Nombres y apellidos" required>
                </div>
                <div class="registroCampos">
                    <label for="correo" class="lblRegistro required">Correo institucional</label>
                    <input type="email" class="form-control" id="correo" name="correo" placeholder="ejemplo@uacam.mx" required>
                </div>
                <div class="selects_registro">
                    <div class="mb-3 row">
                        <label for="rol" class="col-sm-2 col-form-label required">Rol:</label>
                        <div class="col-sm-10">
                            <select name="rol" id="rol" class="form-select form-select-sm" required>
                                <option value="Admin">Administrador</option>
                                <option value="Usuario">Usuario</option>
                                <option value="Tecnico">Técnico</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label for="genero" class="col-sm-2 col-form-label">Genero:</label>
                        <div class="col-sm-10">
                            <select name="genero" id="genero" class="form-select form-select-sm" required>
                                <option value="F">Femenino</option>
                                <option value="M">Masculino</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div id="enviarRegistro">
                    <input type="submit" value="Registrar" class="btn btn-outline-dark" onclick="validar()">
                </div>
            </form>
            <!-- Button trigger modal -->
            <button type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#exampleModalLong">
                Ver listado de usuarios registrados
            </button>
            <br>
            <!-- Modal -->
            <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
                <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Usuarios</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </div>
                    <div class="modal-body">
                        Enlistado de todos los usuarios registrados en CIC Assistance
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                      <th scope="col">Id</th>
                                      <th scope="col">Nombre</th>
                                      <th scope="col">Rol</th>
                                      <th scope="col">Correo</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <% usuarios.forEach(usuario => { %>
                                    <tr>
                                      <td><%= usuario.IdUsuario %></td>
                                      <td><%= usuario.Nombre%></td>
                                      <td><%= usuario.Rol %></td>
                                      <td><%= usuario.Correo%></td>
                                    </tr>
                                    <% }); %>
                                  </tbody>
                            </table>
                          </div>
                    </div>
                    <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    </div>
                </div>
                </div>
            </div>
        </div>
        <script src="resources/scripts/validacion.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>  <!-- Obtenido de sweetAlert2  -->
        <!--Tenemos que llamar la estructura para usar el mensaje AlertSweet en EJS llamando los parametros establecidos en APPJS-->
        <% if(typeof alert != "undefined"){ %>
        <script>
            Swal.fire({
                title: '<%= alertTitle %>',
                text: '<%= alertMessage %>',
                icon: '<%= alertIcon %>',
                showConfirmButton: <%= showConfirmButton %>,
                timer: <%= timer %>
            }).then(() =>{
                window.location ='/<%= ruta %>'    //Hay que especificar la ruta con '/' que indica que nos redirige a la raiz, index
            })
        </script>
        <% } %>
        </body>
    </div>
<!-----------------------------------TECNICOS-->
<div id="RegistroT" class="contenido-individual">
    <!-- Contenido de Registro -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Registro usuarios</title>
        <link rel="stylesheet" href="resources/css/style_registro.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    </head>
    <body>
<div class="contenedor" id="contenedorTecnicos">
    <h3 class="titulosLogin">Registrar Tecnico</h3>
    <form action="registerT" method="post" id="formRegistro">
        <div class="registroCampos">
            <label for="nombreT" class="lblRegistro required">Nombres:</label>
            <input type="text" class="form-control" name="nombreT" placeholder="Nombre(s)" required>
        </div>
        <div class="registroCampos">
            <label for="apellidos" class="lblRegistro required">Apellidos</label>
            <input type="text" class="form-control" name="apellidos" placeholder="Apellido paterno y materno" required>
        </div>
        <div class="registroCampos">
            <label for="noTrabajador" class="lblRegistro required">Numero de trabajador</label>
            <input type="text" class="form-control" name="noTrabajador" placeholder="Numero de trabajador" required>
        </div>
        <div class="registroCampos">
            <label for="email" class="lblRegistro required">Correo institucional</label>
            <input type="text" class="form-control" name="email" placeholder="correo@uacam.mx" required>
        </div>
        <div class="registroCampos">
            <label for="telef" class="lblRegistro required">Telefono</label>
            <input type="text" class="form-control" name="telef" placeholder="xxx-xxx-xxxx" required>
        </div>
        <div class="selects_registro" id="registroTecnico">
                <label for="idUsuario" class="col-sm-2 col-form-label required" id="lblTec">Id de usuario en CIC Assistance:</label>
                    <select name="IdUsuario" id="tecnicoId" class="form-select form-select-sm" required>
                        <% usuariosTecnicos.forEach(usuario => { %>
                            <option value="<%= usuario.IdUsuario %>"><%= usuario.IdUsuario %>-<%= usuario.Nombre %></option>
                        <% }); %>
                    </select>
        </div>
        <div id="enviarRegistro">
            <input type="submit" value="Registrar" class="btn btn-outline-dark">
        </div>
    </form>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#exampleModalLong2">
        Ver listado de técnicos registrados
    </button>
    <br>
    <!-- Modal -->
    <div class="modal fade" id="exampleModalLong2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle2" aria-hidden="true">
        <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle2">Técnicos</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="modal-body">
                Enlistado de todos los técnicos registrados en CIC Assistance
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                              <th scope="col">Id técnico</th>
                              <th scope="col">Nombre</th>
                              <th scope="col">Apellidos</th>
                              <th scope="col">Correo</th>
                            </tr>
                          </thead>
                          <tbody>
                            <% tecnicos.forEach(tecnico => { %>
                            <tr>
                              <td><%= tecnico.IdTecnico %></td>
                              <td><%= tecnico.Nombre%></td>
                              <td><%= tecnico.Apellidos %></td>
                              <td><%= tecnico.Correo%></td>
                            </tr>
                            <% }); %>
                          </tbody>
                    </table>
                  </div>
            </div>
            <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>  <!-- Obtenido de sweetAlert2  -->
<!--Tenemos que llamar la estructura para usar el mensaje AlertSweet en EJS llamando los parametros establecidos en APPJS-->
<% if(typeof alert != "undefined"){ %>
<script>
    Swal.fire({
        title: '<%= alertTitle %>',
        text: '<%= alertMessage %>',
        icon: '<%= alertIcon %>',
        showConfirmButton: <%= showConfirmButton %>,
        timer: <%= timer %>
    }).then(() =>{
        window.location ='/<%= ruta %>'    //Hay que especificar la ruta con '/' que indica que nos redirige a la raiz, index
    })
</script>
<% } %>
</body>
</div>

<!-- HISTORIAL 2----------------------------------------------------------------------------------------------- -->
<div id="Historial2" class="contenido-individual">
    <!-- Contenido de historial -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="resources/css/solicitud_historial2.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

    <title>Historial</title>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Obtener todas las celdas de la columna IdDictamen
            var celdasIdDictamen = document.querySelectorAll('.historialTablaContenedor .table td:nth-child(6)');

            // Iterar sobre cada celda
            celdasIdDictamen.forEach(function (celda) {
                // Verificar el contenido de la celda
                if (celda.textContent.trim() === 'No existe') {
                    // Obtener las celdas de las columnas "Dicta-PDF"
                    var celdaDictaPDF = celda.parentElement.querySelector('td:nth-child(8)');

                    // Cambiar el contenido por un espacio en blanco en ambas celdas
                    celdaDictaPDF.textContent = ' ';
                }
            });
        });
    </script>
</head>
<body class="historialBody">
    <div class="historialContenedor">
        <h2 id="tituloBitacora">Historial General</h2>
        <div class="historialTablaContenedor">
            <div class="table-responsive">
                <table  class="table table-hover table-striped" id="TablaHistorialVales">
                    <thead>
                            <th>Folio</th>
                            <th>Vale</th>
                            <th>Usuario</th>
                            <th>Equipo</th>
                            <th>Estado</th>
                            <th>Dictamen</th>
                            <th>Vale-PDF</th>
                            <th>Dicta-PDF</th>
                            <th>Diagnóstico Técnico</th>
                    </thead>

                    <% vales.forEach((variables) => { %>
                        <tr>
                            <td><%= variables.FolioSolicitud %></td>
                            <td><%= variables.idVale %></td>
                            <td><%= variables.NombreUsuario %></td>
                            <td><%= variables.Equipo %></td>
                            <td class="estado-td" data-estado="<%= variables.Estado %>"><%= variables.Estado %></td>
                            <td><%= variables.IdDictamen %></td>
                            <td><a href="/descargarPDFvale?folioSolicitud=<%= variables.FolioSolicitud %>"><img src="resources/images/downloads.png" alt="Descargar Vale"></a></td>
                            <td><a href="/descargarPDFdictamen?folioSolicitud=<%= variables.FolioSolicitud %>"><img src="resources/images/downloads.png" alt="Descargar Dictamen"></a></td>
                            <td>
                                <% if (variables.Diagnostico) { %>
                                    <a href="#" class="btn btn-diagnostico" data-toggle="modal" data-target="#exampleModalLong3" data-diagnostico="<%= variables.Diagnostico %>" data-solucion="<%= variables.Solucion %>">
                                        <img src="resources/images/ver.png" alt="Ojo">
                                    </a>
                                <% } %>
                            </td>
                        </tr>
                    <% }); %>
                </table>
            </div>
            <!-- Modal -->
            <div class="modal fade" id="exampleModalLong3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle2" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle3">Técnicos</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th scope="col">Diagnóstico</th>
                                            <th scope="col">Solución aplicada</th>
                                        </tr>
                                    </thead>
                                    <tbody id="diagnosticosSoluciones">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <script src="resources/scripts/semaforoVales.js"></script>
    <script>
        $(document).ready(function() {
            $('.btn-diagnostico').click(function() {
                var diagnostico = $(this).data('diagnostico');
                var solucion = $(this).data('solucion');

                // Limpiar tabla
                $('#diagnosticosSoluciones').empty();

                // Agregar diagnóstico y solución a la tabla
                var row = $('<tr>');
                row.append('<td>' + diagnostico + '</td>');
                row.append('<td>' + solucion + '</td>');
                $('#diagnosticosSoluciones').append(row);
            });
        });
    </script>
</body>
</div>
    <!-- Agrega aquí más secciones de contenido según sea necesario -->

    <!-- Agrega aquí más secciones de contenido según sea necesario -->
<!-- Sección de estadisticas -->

    <div id="Estadisticas" class="contenido-individual">
        <!-- Contenido de historial -->
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="#">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <title>Reportes de uso</title>
    </head>
    <body>
        <div class="container" style="max-width: 100%;">
            <h2 id="estadoSolicitudes">Reportes de uso</h2>
            <div class="container-xl px-4 mt-4">
                <div class="row">
                    <div class="col">
                        <div class="card mb-4">
                            <div class="card-header">Detalles del reporte</div>
                            <div class="card-body">
                                <form method="post" action="#">
                                    <!-- Form Row-->
                                    <div class="row gx-3 mb-3">
                                        <div class="col md-6">
                                            <label class="small mb-1 is-required" for="input_tipo">
                                                Tipo de solicitudes:
                                            </label>
                                            <select class="form-select form-select-mb mb-1" id="input_tipo" autocomplete="off"
                                                    name="tipo">
                                                    <option value="solicitudes" selected>Solicitudes</option>
                                                    <option value="vales">Vales</option>
                                                    <option value="dictamenes">Dictámenes</option>
                                            </select>
                                        </div>
                                    <div class="row gx-3 mb-3 ">
                                        <p class="text-justify mt-2 mb-0">Seleccione el periodo de tiempo que desea incluir en el reporte</p>

                                        <div class="col-md-6">
                                            <label class="small mb-1 is-required" for="input_desde">
                                                Desde:
                                            </label>
                                            <input class="form-control" id="input_desde" type="date" required
                                                   autocomplete="off" name="desdeFecha"
                                                   placeholder="Ingrese desde que fecha"/>
                                        </div>

                                        <div class="col-md-6 ">
                                            <label class="small mb-1 is-required" for="input_hasta">
                                                Hasta:
                                            </label>
                                            <div class="input-group">
                                                <input type="date" class="form-control" name="hastaFecha" required autocomplete="off"
                                                       placeholder="Ingrese hasta que fecha" id="input_hasta">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row gx-3 mb-3 ">
                                        <p class="text-justify">Introduzca los datos complementarios del reporte</p>
                                        <div class="col-md-4">
                                            <label class="small mb-1 is-required" for="input_titulo">
                                                Título:
                                            </label>
                                            <select class="form-select form-select-mb mb-1" id="input_titulo" autocomplete="off"
                                                    name="titulo">
                                                    <option value="Ing.">Ing.</option>
                                                    <option value="Lic.">Lic.</option>
                                                    <option value="Dr.">Dr.</option>
                                            </select>
                                        </div>

                                        <div class="col-md-4">
                                            <label class="small mb-1 is-required" for="input_nombre">
                                                Nombre:
                                            </label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" name="nombre" required autocomplete="off"
                                                       placeholder="Ingrese su nombre" id="input_nombre">
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <label class="small mb-1 is-required" for="input_oficio">
                                                Núm. de oficio:
                                            </label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" name="oficio" required autocomplete="off"
                                                       placeholder="P.E. 10/15" id="input_oficio">
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <label class="small mb-1 is-required" for="input_expediente">
                                                Expediente:
                                            </label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" name="expediente" required autocomplete="off"
                                                       placeholder="P.E. MR-15" id="input_expediente">
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <label class="small mb-1 is-required" for="input_area">
                                                Área:
                                            </label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" name="area" required autocomplete="off"
                                                       placeholder="P.E. 10/15" id="input_area">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-around">
                                        <button type="button" id="generarReportesBtn" class="btn text-light" style="background-color: #0D1642;">Generar reporte</button>
                                        <button type="button" id="generarEstadisticasBtn" class="btn text-light" style="background-color: #0D1642;">Generar estadisticas</button>
                                    </div>
                                    </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </body>
    </div>
    <script src="resources/scripts/estadisticas.js"></script>
</main>

<footer class="pie-pagina">
    <div class="enlaces-sociales">
        <a href="https://www.facebook.com/UACamOficial"><img src="resources/images/face_logo.png" alt="Facebook"></a>
        <a href="https://twitter.com/UacamOficial"><img src="resources/images/twitter_logo.jpg" alt="Twitter"></a>
    </div>
    <p>&copy; 2024 CIC Assistance. Todos los derechos reservados.</p>
</footer>

<script src="resources/scripts/paneles.js"></script>


<!-- SCRIPTS PARA GENERAR LOS FILTROS FUNCIONALES ------------------------------------------------------------------------->
<script src="resources/scripts/paneles.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdn.datatables.net/2.0.2/js/dataTables.js"></script>
<script src="https://cdn.datatables.net/2.0.2/js/dataTables.bootstrap5.js"></script>

<script>

$(document).ready(function() {
    // Inicializar las tablas DataTable
    $('#TablaHistorialSolicitudes').DataTable({
        language: {
            info: 'Mostrando _PAGE_ de _PAGES_ paginas',
            infoEmpty: 'No hay registros disponibles',
            lengthMenu: '_MENU_ Entradas por página',
            zeroRecords: 'No se encontraron registros - Lo siento',
            search: "Buscar:"
        }
    });

    $('#TablaHistorialVales').DataTable({
        language: {
            info: 'Mostrando _PAGE_ de _PAGES_ paginas',
            infoEmpty: 'No hay registros disponibles',
            lengthMenu: '_MENU_ Entradas por página',
            zeroRecords: 'No se encontraron registros - Lo siento',
            search: "Buscar:"
        }
    });

    // Escuchar el evento draw.dt para cada tabla y recargar los estilos de Bootstrap
    $('#TablaHistorialSolicitudes').on('draw.dt', function () {
        $(this).closest('.dataTables_wrapper').find('button').removeClass('btn-secondary').addClass('btn-primary');
    });

    $('#TablaHistorialVales').on('draw.dt', function () {
        $(this).closest('.dataTables_wrapper').find('button').removeClass('btn-secondary').addClass('btn-primary');
    });
});
</script>
<!--Script para mostrar el div logout-->
<script>
    const contenedorMostrarSesion = document.querySelector('.contenedorMostrarSesion');
    const logoutMenu = document.querySelector('#logoutMenu');

    contenedorMostrarSesion.addEventListener('click', function(event) {
        logoutMenu.style.display = (logoutMenu.style.display === 'block') ? 'none' : 'block';
        event.stopPropagation();
    });

    document.addEventListener('click', function(event) {
        if (!logoutMenu.contains(event.target) && event.target !== logoutMenu) {
            logoutMenu.style.display = 'none';
        }
    });

</script>

</body>
</html>
